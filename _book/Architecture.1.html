
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Architecture Â· Theia</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Authoring_Extensions.html" />
    
    
    <link rel="prev" href="./" />
    

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700%7CLato:300,400,400i,700' rel='stylesheet'>
  <!-- Css -->
  <link rel="stylesheet" href="../css/bootstrap.min.css" />
  <link rel="stylesheet" href="../css/font-icons.css" />
  <link rel="stylesheet" href="../css/style.css" />

  <!-- Favicons -->
  <link rel="shortcut icon" href="../img/favicon.ico">
  <link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">

    </head>
    <body>

          <!-- Preloader -->
  <div class="loader-mask">
    <div class="loader">
      "Loading..."
    </div>
  </div>

  <main class="main-wrapper">

    <!-- Navigation -->
    <header class="nav nav--transparent">

      <div class="nav__holder" id="sticky-nav">
        <div class="container">
          <div class="flex-parent">

            <div class="nav__header clearfix">
              <!-- Logo -->
              <div class="logo-wrap">
                <a href="../index.html" class="logo__link">
                  <img class="logo logo--dark" src="../img/logo-dark.png" alt="logo">
                  <img class="logo logo--light" src="../img/logo-light.png" alt="logo">
                </a>
              </div>

              <button type="button" class="nav__icon-toggle" id="nav__icon-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="nav__icon-toggle-bar"></span>
                <span class="nav__icon-toggle-bar"></span>
                <span class="nav__icon-toggle-bar"></span>
              </button>
            </div> <!-- end nav-header -->

            <nav id="navbar-collapse" class="nav__wrap collapse navbar-collapse">              
              <ul class="nav__menu nav__menu--inline">

                <li class="nav__dropdown active">
                  <a href="../index.html#">Home</a>
                </li>
                <li>
                  <a href="#features">Features</a>
                </li>
                <li>
                  <a href="../documentation.html">Documentation</a>
                </li>            
              </ul> <!-- end menu -->

              <div class="nav__btn-holder">
                <a href="https://github.com/theia-ide/theia" class="btn btn--sm btn--color rounded"><span>View on GitHub</span></a>
              </div>
            </nav> <!-- end nav-wrap -->         
        
          </div> <!-- end flex-parent -->
        </div> <!-- end container -->

      </div>
    </header> <!-- end navigation -->


    <div class="content-wrapper oh">
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="Architecture.html">
            
                <a href="Architecture.html">
            
                    
                    Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Authoring_Extensions.html">
            
                <a href="Authoring_Extensions.html">
            
                    
                    Developing an extension
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Internals.html">
            
                <a href="Internals.html">
            
                    
                    Internals
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Commands_Keybindings.html">
            
                <a href="Commands_Keybindings.html">
            
                    
                    Commands
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Preferences.html">
            
                <a href="Preferences.html">
            
                    
                    Preferences
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Architecture</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="architecture">Architecture</h1>
<p>This section describes the overall architecture of Theia.</p>
<p>Theia is designed to work as a native desktop application as well as in the
context of a browser and a remote server. To support both situations with a
single source, Theia runs in two separate processes. Those processes are called
<em>frontend</em> and <em>backend</em> respectively, and they communicate through JSON-RPC
messages over WebSockets or REST APIs over HTTP. In the case of Electron, the
backend, as well as the frontend, run locally, while in a remote context the
backend would run on a remote host.</p>
<p>Both the frontend and backend processes have their dependency injection (DI)
container (see below) to which extensions can contribute.</p>
<h2 id="frontend">Frontend</h2>
<p>The frontend process represents the client and renders the UI. In the browser,
it simply runs in the rendering loop, while in Electron it runs in an Electron
Window, which basically is a browser with additional Electron and Node.js APIs.
Therefore, any frontend code may assume browser as a platform but not Node.js.</p>
<p>The startup of the frontend process will first load the DI modules of all
contributing extensions before it obtains an instance of <code>FrontendApplication</code>
and call <code>start()</code> on it.</p>
<h2 id="backend">Backend</h2>
<p>The backend process runs on Node.js. We use <em>express</em> as the HTTP server. It
may not use any code that requires a browser (DOM API) as the platform.</p>
<p>The startup of the backend application will first load the DI modules of all
contributing extensions before it obtains an instance of <code>BackendApplication</code>
and calls <code>start(portNumber)</code> on it.</p>
<p>By default the backend&apos;s express server also serves the code for the frontend.</p>
<h2 id="separation-by-platform">Separation By Platform</h2>
<p>In an extension&apos;s top folder we have an additional layer of folders to separate
by platform:</p>
<ul>
<li>The <code>common</code> folder contains code that doesn&apos;t depend on any runtime.</li>
<li>The <code>browser</code> folder contains code requiring a modern browser as a platform
(DOM API).</li>
<li>The <code>electron-browser</code> folder contains frontend code that requires DOM API
as well as Electron renderer-process specific APIs.</li>
<li>The <code>node</code> folder contains (backend) code requiring Node.js as a platform.</li>
<li>The <code>node-electron</code> folder contains (backend) code specific for Electron.</li>
</ul>
<h2 id="dependency-injection-di">Dependency Injection (DI)</h2>
<p>Theia uses the DI framework <a href="http://inversify.io/" target="_blank">Inversify.js</a> to wire up the
different components.</p>
<p>DI decouples a component from creating its dependencies. Instead, it gets them
injected on creation (as parameters of a constructor). A DI container does the
creation for you, based on some configuration you provide on startup through
so-called container modules.</p>
<p>For instance, the <code>Navigator</code> widget needs access to a <code>FileSystem</code> to present
folders and files in a tree. With DI the concretion of that <code>FileSystem</code>
interface is not important to the <code>Navigator</code> widget. It can safely assume that
an object consistent with the <code>FileSystem</code> interface is ready to use. In Theia,
the used <code>FileSystem</code> concretion is just a proxy sending JSON-RPC messages to
the backend, so it needs a particular configuration and treatment. The
navigator doesn&apos;t need to care as it will get injected a fully working
<code>FileSystem</code> instance.</p>
<p>Moreover, this decoupling of construction and use, allows extensions to provide
their very specific implementations of e.g. a <code>FileSystem</code> if needed. Still
without touching any users of the <code>FileSystem</code> interface.</p>
<p>DI is an integral part of Theia. Therefore, we highly recommend learning at
least the basics of <a href="http://inversify.io/" target="_blank">Inversify.js</a>.</p>
<h2 id="extensions">Extensions</h2>
<p>Theia is composed of extensions. An extension is an npm package that exposes
any number of DI modules (<code>ContainerModule</code>) that contribute to the creation of
the DI container.</p>
<p><em>At the moment an extension is consumed by adding a dependency to the
npm-package and then referencing the exposed DI modules in the startup script
(see <a href="../examples/browser/src/client/main.ts">main.ts</a>). In the future, we will
automate the creation of the application, based on metadata in the
<code>package.json</code> of an extension. Extensions can be installed/uninstalled at
runtime, which will trigger a recompilation and restart.</em></p>
<p>Through a DI module, the extension can provide bindings from types to concrete
implementations, i.e. provide services and contributions.</p>
<h3 id="services">Services</h3>
<p>A service is just a binding for other components to use. For instance, one
extension could expose the <code>SelectionService</code> so that others can get an
instance injected and use it.</p>
<h3 id="contribution-points">Contribution-Points</h3>
<p>If an extension wants to provide a hook for others to contribute to, they
should define a <em>contribution-point</em>. A <em>contribution-point</em> is just an
interface that many others can implement. The extension will delegate to them
when needed.</p>
<p>The <code>OpenerService</code>, for instance, defines a contribution point to allow others
registering <code>OpenHandler</code>s. You can have a look at the code
<a href="../packages/core/src/browser/opener-service.ts">here</a>.</p>
<p>Theia comes with an extensive list of contribution points already. A good way
to see what contribution points exist is to do a find references on
<code>bindContributionProvider</code>.</p>
<h2 id="see-also">See also</h2>
<p>For a high level overview of Theia&apos;s Architecture, see this document: </p>
<p><a href="https://docs.google.com/document/d/1aodR1LJEF_zu7xBis2MjpHRyv7JKJzW7EWI9XRYCt48" target="_blank">Multi-Language IDE Implemented in JS - Scope and Architecture</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Authoring_Extensions.html" class="navigation navigation-next " aria-label="Next page: Developing an extension">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Architecture","level":"1.2","depth":1,"next":{"title":"Developing an extension","level":"1.3","depth":1,"path":"Authoring_Extensions.md","ref":"Authoring_Extensions.md","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["livereload"],"root":"./doc","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Theia","gitbook":"*","description:":"bla und blub"},"file":{"path":"Architecture.md","mtime":"2018-01-08T12:07:33.588Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-02-19T08:08:33.123Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>
</div> <!-- end content wrapper -->
</main> <!-- end main wrapper -->


<!-- jQuery Scripts -->
<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/plugins.js"></script>  
<script type="text/javascript" src="../js/scripts.js"></script>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

